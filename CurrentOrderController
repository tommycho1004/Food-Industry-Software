package com.example.demo;

import javafx.event.ActionEvent;
import javafx.fxml.FXML;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.scene.control.Alert;
import javafx.scene.control.Button;
import javafx.scene.control.ListView;
import javafx.scene.control.TextField;

import java.io.IOException;

public class CurrentOrderController {


    Order currentOrder = new Order();

    @FXML
    private Button addOrder;

    @FXML
    private TextField number;

    /**
     * Getter for the text field number
     * @return the text field number
     */
    public TextField getNumber() {
        return number;
    }

    @FXML
    private TextField orderTotal;

    @FXML
    private ListView<?> ordersList;

    @FXML
    private Button removePizza;

    @FXML
    private TextField salesTax;

    @FXML
    private TextField subtotal;

    /**
     * Method to handle the add order button. 
     * @param event event where add order button is clicked
     */
    @FXML
    void addOrderClick(ActionEvent event) {
        try {
            FXMLLoader loader = new FXMLLoader();
            loader.setLocation(getClass().getResource("StoreOrdersView.fxml"));
            Parent tableViewParent = loader.load();
            Scene tableViewScene = new Scene(tableViewParent);
            //access the controller and call a method
            StoreOrdersController storeOrdersController = loader.getController();
            StoreOrders storeOrders = storeOrdersController.getStoreOrderList();
            storeOrders.addOrder(currentOrder);
            Alert alert = new Alert(Alert.AlertType.INFORMATION);
            alert.setTitle("Successfully  the Order!");
            alert.setHeaderText("The order has been added to the list.");
            alert.showAndWait();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Method to handle the remove pizza button click
     * @param event event where remove pizza button is clicked
     */
    @FXML
    void removePizzaClick(ActionEvent event) {
        currentOrder.removePizza(ordersList.getSelectionModel().getSelectedIndex());
        Alert alert = new Alert(Alert.AlertType.INFORMATION);
        alert.setTitle("Successfully removed pizza!");
        alert.setHeaderText("The pizza has been removed from the list.");
        alert.showAndWait();
    }

}
